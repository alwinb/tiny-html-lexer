!function t(e,n,i){function a(r,u){if(!n[r]){if(!e[r]){var m="function"==typeof require&&require;if(!u&&m)return m(r,!0);if(o)return o(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[r]={exports:{}};e[r][0].call(c.exports,(function(t){return a(e[r][1][t]||t)}),c,c.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,n){window.tinyhtml={...t("./token-builder"),...t("./tiny-lexer")}},{"./tiny-lexer":3,"./token-builder":4}],2:[function(t,e,n){e.exports={...t("./token-builder"),...t("./tiny-lexer")}},{"./tiny-lexer":3,"./token-builder":4}],3:[function(t,e,n){console.log.bind(console);const i={},a=i,{attributeName:o,attributeAssign:r,attributeValueStart:u,attributeValueData:m,attributeValueEnd:s,tagSpace:c,commentStart:f,commentStartBogus:l,commentData:d,commentEnd:g,commentEndBogus:b,startTagStart:h,endTagStart:p,tagEnd:x,tagEndClose:w,charRefDecimal:E,charRefHex:y,charRefNamed:A,unescaped:S,data:D,rcdata:V,rawtext:N,plaintext:v}=(T=i,new Proxy({},{get:(t,e)=>(T[e]=e,e)}));var T;const R={data:[{if:"<[a-zA-Z][^>/\t\n\f ]*",emit:a.startTagStart,goto:function(t,e){let n=e.substr(1);return this.tagName=n,this.content=n in k?k[n]:"data","beforeAtt"}},{if:"</[a-zA-Z][^>/\t\n\f ]*",emit:a.endTagStart,goto:"beforeAtt"},{if:"\x3c!--",emit:a.commentStart,goto:"commentStart"},{if:"<[/!?]",emit:a.commentStartBogus,goto:"bogusComment"},{if:"[^<&]+",emit:a.data},{if:"<",emit:a.unescaped},{emit:a.data,goto:B}],rawtext:[{if:"</[a-zA-Z][^>/\t\n\f ]*",emit:O,goto:z},{if:".[^<]*",emit:a.rawtext}],rcdata:[{if:"</[a-zA-Z][^>/\t\n\f ]*",emit:O,goto:z},{if:"<",emit:a.unescaped},{if:"[^<&]+",emit:a.rcdata},{emit:a.rcdata,goto:B}],plaintext:[{if:".+",emit:a.plaintext}],charRef:[{if:"&#[0-9]+;?",emit:a.charRefDecimal,goto:C},{if:"&#[xX][0-9A-Fa-f]+;?",emit:a.charRefHex,goto:C},{if:"&(?:copysr|centerdot|divideontimes|[gl]t(?:quest|dot|cir|cc)|[gl]trPar|gtr(?:dot|less|eqqless|eqless|approx|arr|sim)|ltr(?:i|if|ie|mes)|ltlarr|lthree|notin(?:dot|E|v[abc])?|notni(?:v[abc])?|parallel|times(?:bar|d|b));",emit:a.charRefNamed,goto:C},{if:"&(?:[AEIOUYaeiouy]?acute|[AEIOUaeiou](?:grave|circ|uml)|y?uml|[ANOano]tilde|[Aa]ring|[Oo]slash|[Cc]?cedil|brvbar|curren|divide|frac(?:12|14|34)|iquest|middot|plusmn|(?:AE|ae|sz)lig|[lr]aquo|iexcl|micro|pound|THORN|thorn|times|COPY|copy|cent|macr|nbsp|ord[fm]|para|QUOT|quot|sect|sup[123]|AMP|amp|ETH|eth|REG|reg|deg|not|shy|yen|GT|gt|LT|lt);?",emit:function(){const t=this.context,e=this.input[this.position];if(("unquoted"===t||"doubleQuoted"===t||"singleQuoted"===t)&&/[a-zA-Z0-9=]/.test(e))return a.attributeValueData;return a.charRefNamed},goto:C},{if:"&[A-Za-z][A-Za-z0-9]*;?",emit:a.charRefNamed,goto:C},{if:"&",emit:a.unescaped,goto:C}],beforeAtt:[{if:">",emit:a.tagEnd,goto:q},{if:"/>",emit:a.tagEndClose,goto:q},{if:"[\t\n\f ]+",emit:a.tagSpace},{if:"/+(?!>)",emit:a.tagSpace},{if:".[^>/\t\n\f =]*",emit:a.attributeName,goto:"afterAttName"}],afterAttName:[{if:">",emit:a.tagEnd,goto:q},{if:"/>",emit:a.tagEndClose,goto:q},{if:"=[\t\n\f ]*",emit:a.attributeAssign,goto:"attValue"},{if:"/+(?!>)",emit:a.tagSpace,goto:"beforeAtt"},{if:"[\t\n\f ]+",emit:a.tagSpace},{if:".[^>/\t\n\f =]*",emit:a.attributeName}],attValue:[{if:">",emit:a.tagEnd,goto:q},{if:'"',emit:a.attributeValueStart,goto:"doubleQuoted"},{if:"'",emit:a.attributeValueStart,goto:"singleQuoted"},{emit:a.attributeValueStart,goto:"unquoted"}],unquoted:[{if:"[^&>\t\n\f ]+",emit:a.attributeValueData},{if:"(?=[>\t\n\f ])",emit:a.attributeValueEnd,goto:"beforeAtt"},{emit:a.attributeValueData,goto:B}],doubleQuoted:[{if:'[^"&]+',emit:a.attributeValueData},{if:'"',emit:a.attributeValueEnd,goto:"beforeAtt"},{emit:a.attributeValueData,goto:B}],singleQuoted:[{if:"[^'&]+",emit:a.attributeValueData},{if:"'",emit:a.attributeValueEnd,goto:"beforeAtt"},{emit:a.attributeValueData,goto:B}],bogusComment:[{if:"[^>]+",emit:a.commentData,goto:"bogusComment"},{if:">",emit:a.commentEndBogus,goto:q}],commentStart:[{if:"-?>",emit:a.commentEnd,goto:q},{if:"--!?>",emit:a.commentEnd,goto:q},{if:"--!",emit:a.commentData,goto:"comment"},{if:"--?",emit:a.commentData,goto:"comment"},{if:"[^>-][^-]*",emit:a.commentData,goto:"comment"}],comment:[{if:"--!?>",emit:a.commentEnd,goto:q},{if:"--!",emit:a.commentData},{if:"--?",emit:a.commentData},{if:"[^-]+",emit:a.commentData}]},k={style:"rawtext",script:"rawtext",xmp:"rawtext",iframe:"rawtext",noembed:"rawtext",noframes:"rawtext",textarea:"rcdata",title:"rcdata",plaintext:"plaintext"};function q(){return this.content}function C(){return this.context}function O(t,e){return e.substr(2)===this.tagName?(this.content="data",a.endTagStart):this.content}function z(t,e){return e.substr(2)===this.tagName?(this.content="data","beforeAtt"):t}function B(t,e){return this.context=t,"charRef"}function Q(t,e){var n;this.name=e,this.regex=new RegExp("("+t.map(Z).join(")|(")+")","sgy"),this.edges=t.map((n=e,function({if:t=".{0}",emit:e,goto:i=n}){var a;return{emit:"function"==typeof e?(a=e,function(t,e){return[a.call(this,t,e),e]}):(t,n)=>[e,n],goto:"function"==typeof i?i:(t,e)=>i}}))}function Z(t){return Array.isArray(t)?t[0]:"if"in t?t.if:".{0}"}const H=new function(t,e,n=Object){const i=function(t){const e={};for(let n in t)e[n]=new Q(t[n],n);return e}(t);this.tokenize=function(t,a=0,o=e){const r=new n(t,a,o),u=function*(t,e,n,a){do{if(!(a in i))throw new Error(`Lexer: no such symbol: ${a}.`);{const o=i[a],r=o.regex,u=(r.lastIndex=n,r.exec(t));if(!u){if(n!==t.length)throw new SyntaxError(`Lexer: invalid input at index ${n} in state ${a} before ${t.substr(n,12)}`);return}let m=1;for(;null==u[m];)m++;const s=o.edges[m-1],c=s.emit.call(e,a,u[m]);a=s.goto.call(e,a,u[m]),n=r.lastIndex,Object.assign(e,{symbol:a,position:n}),yield c}}while(n<=t.length)}(t,r,a,o);return u.state=r,u}}(R,"data",(function(t){this.content="data",this.context="data",this.tagName,this.position=0,this.input=t})).tokenize;e.exports={tokenize:H,tokenise:H,chunks:H,tokenTypes:i}},{}],4:[function(t,e,n){console.log.bind(console),t("./");function i(t){this.name=t,this.attributes=[],this.selfClosing=!1}function a(t){this.name=t,this.selfClosing=!1,this.attributes=[]}function o(t){this.name=t,this.value=null}function r(){this.data=""}function u(){let t=[],e=null,n=null;function u(){t.push(e),e=null}function m(e){e&&t.push(e)}Object.defineProperties(this,{output:{enumerable:!0,get:e=>t},token:{enumerable:!0,get:t=>e},attr:{enumerable:!0,get:t=>n}}),this.read=function*(){yield*t,t=[]},this.write=function([t,e]){if(!(t in s))throw new Error("unknown token type "+t);s[t](e)},this.end=function(){n=null,e&&u()};const s={commentStart:t=>e=new r,commentStartBogus:t=>e=new r,startTagStart:t=>e=new i(t.substr(1)),endTagStart:t=>e=new a(t.substr(2)),tagEndClose:t=>e.selfClosing=!0,attributeName:t=>e.attributes.push(n=new o(t)),tagSpace:t=>e,attributeAssign:t=>n.value="",attributeValueStart:t=>n.value="",attributeValueData:t=>n.value+=t,attributeValueEnd:t=>n=null,commentData:t=>e.data+=t,tagEnd:u,commentEnd:u,commentEndBogus:u,unescaped:m,data:m,rcdata:m,rawtext:m,plaintext:m,charRefDecimal:t=>function(t){throw new Error("entity parsing not yet implemented")}(t.substr(2)),charRefHex:t=>function(t){throw new Error("entity parsing not yet implemented")}(t.substr(3)),charRefNamed:t=>function(t){throw new Error("entity parsing not yet implemented")}()}}e.exports={StartTag:i,EndTag:a,Attribute:o,Comment:r,TokenBuilder:u},u.build=function(t){const e=new u,n=function*(t,e){for(let n of t)e.write(n),yield*e.read();e.end(),yield*e.read()}(t,e);return n.state=e,n}},{"./":2}]},{},[1]);
