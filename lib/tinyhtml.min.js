(()=>{var O=(n,t)=>()=>(t||(t={exports:{}},n(t.exports,t)),t.exports);var I=O((Bt,B)=>{var Lt=console.log.bind(console),F=n=>new Proxy({},{get:(t,r)=>(n[r]=r,r)}),G={},ct={},{attributeName:j,attributeAssign:ut,attributeValueStart:_,attributeValueData:g,attributeValueEnd:$,tagSpace:w,commentStart:M,commentStartBogus:lt,commentData:h,commentEnd:v,commentEndBogus:ft,startTagStart:mt,endTagStart:Y,tagEnd:k,tagEndClose:Z,charRefDecimal:dt,charRefHex:gt,charRefNamed:q,unescaped:D,data:p,space:ht,newline:P,rcdata:S,rawtext:x,plaintext:X}=F(G),{beforeAtt:b,bogusComment:J,afterAttName:pt,attValue:xt,comment:H,doubleQuoted:K,singleQuoted:W,unquoted:tt,charRef:bt}=F(ct),Tt=`<[a-zA-Z][^>/	\r
\f ]*`,z=`</[a-zA-Z][^>/	\r
\f ]*`,At="&#[0-9]+;?",Et="&#[xX][0-9A-Fa-f]+;?",wt="&[A-Za-z][A-Za-z0-9]*;",et=`.[^>/	\r
\f =]*`,St=`[^&>	\r
\f ]+`,Rt=`(?=[>	\r
\f ])`,Ct="&(?:copysr|centerdot|divideontimes|[gl]t(?:quest|dot|cir|cc)|[gl]trPar|gtr(?:dot|less|eqqless|eqless|approx|arr|sim)|ltr(?:i|if|ie|mes)|ltlarr|lthree|notin(?:dot|E|v[abc])?|notni(?:v[abc])?|parallel|times(?:bar|d|b));",yt="&(?:[AEIOUYaeiouy]?acute|[AEIOUaeiou](?:grave|circ|uml)|y?uml|[ANOano]tilde|[Aa]ring|[Oo]slash|[Cc]?cedil|brvbar|curren|divide|frac(?:12|14|34)|iquest|middot|plusmn|(?:AE|ae|sz)lig|[lr]aquo|iexcl|micro|pound|THORN|thorn|times|COPY|copy|cent|macr|nbsp|ord[fm]|para|QUOT|quot|sect|sup[123]|AMP|amp|ETH|eth|REG|reg|deg|not|shy|yen|GT|gt|LT|lt);?",_t={data:[[Tt,mt,Nt],[z,Y,b],["<!--",M,M],["<[/!?]",lt,J],["[	\f ]+",ht],[`\r?
|\r`,P],[`[^<&	\f\r
 ]+`,p],["<",D],["",p,E]],rawtext:[[z,nt,rt],[`\r?
|\r`,P],[`.[^<\r
]*`,x]],rcdata:[[z,nt,rt],["<",D],[`[^<&\r
]+`,S],[`\r?
|\r`,P],["",S,E]],plaintext:[[".+",X]],charRef:[[At,dt,T],[Et,gt,T],[Ct,q,T],[yt,Ot,T],[wt,q,T],["&",D,T]],beforeAtt:[[">",k,l],["/>",Z,l],[`[	\r
\f ]+`,w],["/+(?!>)",w],[et,j,pt]],afterAttName:[[">",k,l],["/>",Z,l],[`=[	\r
\f ]*`,ut,xt],["/+(?!>)",w,b],[`[	\r
\f ]+`,w],[et,j]],attValue:[[">",k,l],['"',_,K],["'",_,W],["",_,tt]],unquoted:[[St,g],[Rt,$,b],["",g,E]],doubleQuoted:[['[^"&]+',g],['"',$,b],["",g,E]],singleQuoted:[["[^'&]+",g],["'",$,b],["",g,E]],bogusComment:[["[^>]+",h,J],[">",ft,l]],commentStart:[["-?>",v,l],["--!?>",v,l],["--!",h,H],["--?",h,H],["[^>-][^-]*",h,H]],comment:[["--!?>",v,l],["--!",h],["--?",h],["[^-]+",h]]},st={style:x,script:x,xmp:x,iframe:x,noembed:x,noframes:x,textarea:S,title:S,plaintext:X};function $t(n){this.content=p,this.context=p,this.tagName,this.position=0,this.input=n}function Nt(n,t){let r=t.substr(1);return this.tagName=r,this.content=r in st?st[r]:p,b}function l(){return this.content}function T(){return this.context}function Ot(n,t){let r=this.context,s=this.input[this.position+t.length];return(r===tt||r===K||r===W)&&t.substr(-1)!==";"&&/[a-zA-Z0-9=]/.test(s)?g:q}function nt(n,t){return t.substr(2)===this.tagName?(this.content=p,Y):this.content}function rt(n,t){return t.substr(2)===this.tagName?(this.content=p,b):n}function E(n,t){return this.context=n,bt}function qt(n,t){this.name=t,this.regex=new RegExp("("+n.map(vt).join(")|(")+")","sgy"),this.edges=n.map(kt(t))}function Dt(n){let t={};for(let r in n)t[r]=new qt(n[r],r);return t}var vt=n=>n[0],kt=n=>function(t){let[r=".{0}",s,c=n]=t,a=typeof c=="function"?c:(i,o)=>c;return{emit:typeof s=="function"?Pt(s):(i,o)=>[s,o],goto:a}},Pt=n=>function(t,r){return[n.call(this,t,r),r]};function Ht(n,t,r=Object){let s=Dt(n);this.tokenize=function(a,u=0,i=t){let o=new r(a,u,i),m=c(a,o,u,i);return m.state=o,m};function*c(a,u,i,o){a=String(a);do if(o in s){let m=s[o],A=m.regex,d=(A.lastIndex=i,A.exec(a));if(!d){if(i!==a.length)throw new SyntaxError(`Lexer: invalid input at index ${i} in state ${o} before ${a.substr(i,12)}`);return}let e=1;for(;d[e]==null;)e++;let f=m.edges[e-1],N=f.emit.call(u,o,d[e]);o=f.goto.call(u,o,d[e]),i=A.lastIndex,Object.assign(u,{symbol:o,position:i}),yield N}else throw new Error(`Lexer: no such symbol: ${o}.`);while(i<=a.length)}}var at=new Ht(_t,"data",$t).tokenize;B.exports={lexemes:at,chunks:at,tokenTypes:G}});var ot=O((Ft,R)=>{R.exports={...Q(),...I()};var{TokenBuilder:zt,lexemes:It}=R.exports;R.exports.tags=n=>zt.build(It(n))});var Q=O((Mt,it)=>{var Gt=console.log.bind(console),jt=ot(),C=class extends Map{constructor(t){super();this.name=t,this.selfClosing=!1}valueOf(){return this.name}toString(){return`<${this.name}${this._printAtts()}${this.selfClosing?"/":""}>`}_printAtts(){let t="";for(let[r,s]of this.entries())t+=" "+(s==null?r:r+"="+s);return t}},U=class{constructor(t){this.name=t,this.selfClosing=!1}toString(){return`</${this.name}>`}},y=class{constructor(t=""){this.data=t}toString(){return`<!--${this.data}-->`}},V=class extends String{};function Qt(n){this.name=n,this.value=""}function L(){let n=[],t=null,r=[],s=null;Object.defineProperty(this,"state",{get:()=>({output:n,token:t,attrs:r,attr:s})}),this.read=function*(){yield*n,n=[]},this.write=function([f,N]){if(f in d)d[f](N);else throw new Error("unknown token type "+f)},this.end=function(){t&&c(t),r=[],s=null,t=null};function c(){if(t instanceof C)for(let{name:e,value:f}of r)t.has(e)||t.set(e,f);n.push(t),r=[],s=null,t=null}function a(e){e&&(s?s.value+=e:n.push(e))}function u(e){e&&n.push(new V(e))}let i={"amp;":"&","lt;":"<","gt;":">","quot;":'"',"AMP;":"&","LT;":"<","GT;":">","QUOT;":'"',"apos;":"'"},o=e=>String.fromCodePoint(parseInt(e,10)),m=e=>String.fromCodePoint(parseInt(e,16)),A=e=>i[e+(e.substr(-1)!==";"?";":"")]||"&"+e,d={commentStart:e=>t=new y,commentStartBogus:e=>t=new y,startTagStart:e=>t=new C(e.substr(1)),endTagStart:e=>t=new U(e.substr(2)),tagEndClose:e=>t.selfClosing=!0,attributeName:e=>r.push(s=new Qt(e.toLowerCase())),tagSpace:e=>t,attributeAssign:e=>s.value="",attributeValueStart:e=>s.value="",attributeValueData:e=>s.value+=e,attributeValueEnd:e=>s=null,commentData:e=>t.data+=e,tagEnd:c,commentEnd:c,commentEndBogus:c,unescaped:a,data:a,space:u,newline:u,rcdata:a,rawtext:a,plaintext:a,charRefDecimal:e=>a(o(e.substr(2))),charRefHex:e=>a(m(e.substr(3))),charRefNamed:e=>a(A(e.substr(1)))}}L.build=function(n){let t=new L,r=Ut(n,t);return Object.defineProperty(r,"state",{get:()=>t.state}),r};function*Ut(n,t){for(let r of n)t.write(r),yield*t.read();t.end(),yield*t.read()}it.exports={StartTag:C,EndTag:U,Whitespace:V,Comment:y,TokenBuilder:L}});window.tinyhtml={...Q(),...I()};})();
